import{r as s,j as r}from"./index-ssMgTirv.js";const L=({src:t,alt:p,className:o="",width:l,height:i,loading:y="lazy",sizes:x="100vw",crossOrigin:b="use-credentials",fallbackSrc:c=null,...j})=>{const[d,v]=s.useState(!1),[u,$]=s.useState(!1),[m,g]=s.useState(t),[w,F]=s.useState(!1),[E,S]=s.useState(new Set([t])),h=e=>{if(!e)return[];const a=e.replace(/\.[^/.]+$/,"");return[".webp",".avif",".jpg",".jpeg",".png"].map(n=>a+n).filter(n=>n!==e&&!E.has(n))},k=()=>{v(!0)},N=()=>{const e=h(t);if(e.length>0){const a=e[0];S(f=>new Set([...f,a])),g(a),console.warn(`Format failed: ${m}, trying: ${a}`);return}if(!w&&c){console.warn(`All formats failed for: ${t}, using fallback`),g(c),F(!0);return}console.warn(`Image completely failed to load: ${t}`),$(!0)};return r.jsxs("div",{className:`relative ${o}`,style:{width:l,height:i},children:[!d&&!u&&r.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse rounded"}),u&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center rounded",children:r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"ðŸ“· No image"})}),r.jsx("img",{src:m,alt:p,loading:y,onLoad:k,onError:N,className:`w-full h-full object-cover ${o} ${d?"opacity-100":"opacity-0"} transition-opacity duration-300`,width:l,height:i,sizes:x,crossOrigin:b,decoding:"async",...j})]})};export{L as O};
