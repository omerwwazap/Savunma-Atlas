import{r as s,k as p,j as r}from"./index-Cwy08orS.js";const A=({src:t,alt:y,className:o="",width:l,height:i,loading:x="lazy",sizes:b="100vw",crossOrigin:j="anonymous",fallbackSrc:c=null,...v})=>{const[d,$]=s.useState(!1),[m,w]=s.useState(!1),[u,g]=s.useState(p(t)),[F,k]=s.useState(!1),[E,S]=s.useState(new Set([p(t)])),h=e=>{if(!e)return[];const a=e.replace(/\.[^/.]+$/,"");return[".webp",".avif",".jpg",".jpeg",".png"].map(n=>a+n).filter(n=>n!==e&&!E.has(n))},I=()=>{$(!0)},N=()=>{const e=h(t);if(e.length>0){const a=e[0];S(f=>new Set([...f,a])),g(a),console.warn(`Format failed: ${u}, trying: ${a}`);return}if(!F&&c){console.warn(`All formats failed for: ${t}, using fallback`),g(c),k(!0);return}console.warn(`Image completely failed to load: ${t}`),w(!0)};return r.jsxs("div",{className:`relative ${o}`,style:{width:l,height:i},children:[!d&&!m&&r.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse rounded"}),m&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center rounded",children:r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"ðŸ“· No image"})}),r.jsx("img",{src:u,alt:y,loading:x,onLoad:I,onError:N,className:`w-full h-full object-cover ${o} ${d?"opacity-100":"opacity-0"} transition-opacity duration-300`,width:l,height:i,sizes:b,crossOrigin:j,decoding:"async",...v})]})};export{A as O};
