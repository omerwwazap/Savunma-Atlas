import{r as s,k as l,j as r}from"./index-CIKZXlZd.js";const U=({src:t,alt:y,className:c="",width:i,height:d,loading:x="lazy",sizes:b="100vw",crossOrigin:j="anonymous",fallbackSrc:m=null,...v})=>{const[u,S]=s.useState(!1),[g,$]=s.useState(!1),[f,p]=s.useState(l(t)),[w,F]=s.useState(!1),[k,E]=s.useState(new Set([l(t)])),h=a=>{if(!a)return[];const e=l(a),n=e.replace(/\.[^/.]+$/,"");return[".webp",".avif",".jpg",".jpeg",".png"].map(o=>n+o).filter(o=>o!==e&&!k.has(o))},I=()=>{S(!0)},N=()=>{const a=h(t);if(a.length>0){const e=a[0];E(n=>new Set([...n,e])),p(e),console.warn(`Format failed: ${f}, trying: ${e}`);return}if(!w&&m){console.warn(`All formats failed for: ${t}, using fallback`),p(m),F(!0);return}console.warn(`Image completely failed to load: ${t}`),$(!0)};return r.jsxs("div",{className:`relative ${c}`,style:{width:i,height:d},children:[!u&&!g&&r.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse rounded"}),g&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center rounded",children:r.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"ðŸ“· No image"})}),r.jsx("img",{src:f,alt:y,loading:x,onLoad:I,onError:N,className:`w-full h-full object-cover ${c} ${u?"opacity-100":"opacity-0"} transition-opacity duration-300`,width:i,height:d,sizes:b,crossOrigin:j,decoding:"async",...v})]})};export{U as O};
